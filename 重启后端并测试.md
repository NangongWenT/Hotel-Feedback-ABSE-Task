# 重启后端并测试登录

## 🔄 重要：必须重启后端

编码问题已修复，但**后端必须重启**才能生效。

## 📝 重启步骤

### 步骤 1：停止当前后端

在运行后端的 PowerShell 窗口中：
- 按 `Ctrl + C` 停止服务器

### 步骤 2：重新启动后端

```powershell
cd "C:\Users\32353\Desktop\大四上\NLP\CW\Hotel-Feedback-ABSA-Task-main\backend"
.\venv\Scripts\python.exe app.py
```

### 步骤 3：查看启动信息

**应该看到（没有编码错误）：**

```
[WARNING] GPU 计算能力 sm_120 不完全兼容...
[WARNING] GPU 测试失败...
将自动回退到 CPU 模式
默认管理员账户已创建: admin / admin123
 * Running on http://127.0.0.1:5000
```

**如果看到编码错误或异常，请把完整的错误信息发给我！**

### 步骤 4：测试登录

1. **打开浏览器**
2. **访问**: http://localhost:5173
3. **尝试登录**:
   - 用户名: `admin`
   - 密码: `admin123`

## 🔍 如果仍然失败

### 检查后端日志

查看运行后端的 PowerShell 窗口，应该能看到：
- 登录请求的详细信息
- 具体的错误信息

### 测试 API

在浏览器中直接访问：
- http://localhost:5000/api/health
- 应该看到：`{"status": "ok", "message": "服务运行正常"}`

### 检查数据库

```powershell
cd backend
.\venv\Scripts\python.exe test_db.py
```

应该显示：
```
Database OK: 1 users found
  - admin (admin)
```

## ⚠️ 常见问题

### Q1: 后端启动时出现编码错误？

**解决：** 确保已保存所有修改，重新启动。

### Q2: 登录时仍然 500 错误？

**解决：** 
1. 查看后端窗口的完整错误信息
2. 把错误信息发给我
3. 检查数据库是否正常

### Q3: 前端无法连接后端？

**解决：**
1. 确保后端已启动（http://localhost:5000）
2. 确保前端已启动（http://localhost:5173）
3. 检查防火墙设置

## 🎯 下一步

1. **重启后端**（必须！）
2. **查看启动日志**（确认没有错误）
3. **测试登录**（admin/admin123）
4. **如果失败，把错误信息发给我**

## 📝 需要的信息

如果问题仍然存在，请提供：

1. **后端启动时的完整输出**（从启动到出现错误）
2. **登录时的错误信息**（后端窗口显示的内容）
3. **浏览器控制台的错误**（F12 开发者工具）

这样我可以更准确地定位问题！

